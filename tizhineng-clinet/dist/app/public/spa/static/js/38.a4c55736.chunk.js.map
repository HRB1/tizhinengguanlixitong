{"version":3,"sources":["views/home/components/calendar/index.js"],"names":["Test","props","_this","Object","D_tizhineng_tizhineng_client_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__","this","D_tizhineng_tizhineng_client_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2__","D_tizhineng_tizhineng_client_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3__","call","state","currentDay","currentMonth","currentYear","weekList","name","className","dayList","initCalendar","bind","D_tizhineng_tizhineng_client_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4__","renderHeader","renderBody","preMonth","nextMonth","date","nowYear","getFullYear","nowMonth","getMonth","concat","day","getDate","Date","preMonthFirstDate","getMonthFirstDate","setDate","nextMonthFirstDate","currentDate","nowDate","nowMonthFirstDate","nowWeek","getDay","newDateList","startDay","showDayLength","i","dayObject","getDateString","toDateString","push","setState","pre","react__WEBPACK_IMPORTED_MODULE_6___default","a","createElement","onClick","map","week","key","index","Component"],"mappings":"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","file":"static/js/38.a4c55736.chunk.js","sourcesContent":["import React, {Component} from 'react';\r\nimport './style.scss'\r\n\r\nexport default class Test extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            currentDay: '',\r\n            currentMonth: '', \r\n            currentYear: '', \r\n            weekList: [\r\n                {name: 'M', className: ''},\r\n                {name: 'T', className: ''},\r\n                {name: 'W', className: ''},\r\n                {name: 'U', className: ''},\r\n                {name: 'F', className: ''},\r\n                {name: 'S', className: ''},\r\n                {name: 'O', className: ''}\r\n            ],\r\n            dayList: []\r\n        }\r\n\r\n        this.initCalendar = this.initCalendar.bind(this);\r\n        this.renderHeader = this.renderHeader.bind(this);\r\n        this.renderBody = this.renderBody.bind(this);\r\n        this.preMonth = this.preMonth.bind(this);\r\n        this.nextMonth = this.nextMonth.bind(this);\r\n    }\r\n\r\n    componentWillMount() {\r\n      // style.use() // 需要配置loader 可以直接注释 忽略掉  实现每个模块卸载之后 css也会销毁 可以看之前写的一篇react css局部作用域的文章\r\n    }\r\n\r\n    componentWillUnmount() {\r\n       // style.unuse() // 需要配置loader 可以直接注释 忽略掉 实现每个模块卸载之后 css也会销毁 可以看之前写的一篇react css局部作用域的文章\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.initCalendar()\r\n    }\r\n\r\n    // 获取当前date的当月第一天的字符串形式\r\n    getMonthFirstDate(date) {\r\n        let nowYear = date.getFullYear(); // 获取年份\r\n        let nowMonth = date.getMonth()+1; // 获取月份\r\n        return  `${nowYear}-${nowMonth}-01`\r\n    }\r\n\r\n    // 获取当前date的字符串形式\r\n    getDateString(date) {\r\n        let nowYear = date.getFullYear(); // 获取年份\r\n        let nowMonth = date.getMonth()+1; // 获取月份\r\n        let day = date.getDate();\r\n        day = day < 10 ? '0' + day : day;\r\n        return  `${nowYear}-${nowMonth}-${day}`\r\n    }\r\n\r\n    // 上个月\r\n    preMonth() {\r\n        let date = new Date(`${this.state.currentYear}-${this.state.currentMonth}-${this.state.currentDay}`)\r\n        let preMonthFirstDate = new Date(this.getMonthFirstDate(new Date(date.setDate(0)))); // 0 是上个月最后一天\r\n        this.initCalendar(preMonthFirstDate)\r\n    }\r\n\r\n    // 下个月\r\n    nextMonth() {\r\n        let date = new Date(`${this.state.currentYear}-${this.state.currentMonth}-${this.state.currentDay}`)\r\n        let nextMonthFirstDate = new Date(this.getMonthFirstDate(new Date(date.setDate(33))));\r\n        this.initCalendar(nextMonthFirstDate)\r\n    }\r\n\r\n\r\n    // 初始化日历\r\n    initCalendar(currentDate) {\r\n        \r\n        let nowDate = currentDate ? currentDate : new Date();\r\n        let nowMonthFirstDate = this.getMonthFirstDate(nowDate) // 获取当月1号日期\r\n        let nowWeek = new Date(nowMonthFirstDate).getDay() ? new Date(nowMonthFirstDate).getDay() : 7; // 获取星期\r\n        let newDateList = []; // 创建日期数组\r\n        let startDay =  2 - nowWeek; // 开始日期的下标  以为 setDate(0)是上个月最后一天  所以是2-nowWeek\r\n        \r\n        let showDayLength = nowWeek < 6 ? 35 : 42;  // 如果5行能显示下一个月 就只显示5行\r\n        // 循环处理 获取日历上应该显示的日期\r\n        for (let i = startDay; i < startDay + showDayLength; i++) {\r\n            let date = new Date(new Date(nowMonthFirstDate).setDate(i)); // 获取时间对象\r\n            let day = date.getDate() < 10 ? '0' + date.getDate() : date.getDate() // 小于9的数字前面加0\r\n            let dayObject = {\r\n                date: this.getDateString(date),\r\n                day,\r\n                className: '',\r\n            }\r\n            // new Date(str).toDateString() === new Date().toDateString()\r\n            if (date.toDateString() === new Date().toDateString()) {\r\n                dayObject.className = 'today'\r\n            }\r\n            newDateList.push(dayObject)\r\n        }\r\n\r\n        this.setState((pre) => {\r\n            return {\r\n                dayList: newDateList,\r\n                currentDay: nowDate.getDate(),\r\n                currentMonth: nowDate.getMonth() + 1 >= 10 ? nowDate.getMonth() + 1 : '0' + (nowDate.getMonth() + 1),\r\n                currentYear: nowDate.getFullYear(),\r\n            }\r\n        })\r\n\r\n    }\r\n\r\n    renderHeader() {\r\n        return(\r\n            <div className = 'calendar-header'>\r\n                <div className = 'calendar-header-left'>\r\n                    <button onClick = {this.preMonth}>上 </button>\r\n                </div>\r\n                <div className = ''>\r\n                    {this.state.currentYear}年{this.state.currentMonth}月\r\n                </div>\r\n                <div className = 'calendar-header-right'>\r\n                    <button onClick = {this.nextMonth}> 下 </button>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    renderBody() {\r\n        return(\r\n            <div className = 'calendar-body'>\r\n                <div className = 'week-container'>\r\n                    {this.state.weekList.map(week => {\r\n                        return <div key = {week.name} className = {`week ${week.className}`}>{week.name}</div>\r\n                    })}\r\n                </div>\r\n                <div className = 'day-container'>\r\n                    {this.state.dayList.map( (dayObject, index) => {\r\n                        return <div key = {index} className = {`day ${dayObject.className}`}>{dayObject.day}</div>\r\n                    })}\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    render() {\r\n        return(\r\n            <div className = 'calendar'>\r\n                {this.renderHeader()}\r\n                {this.renderBody()}\r\n            </div>\r\n        )\r\n    }\r\n}"],"sourceRoot":""}